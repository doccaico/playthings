export const options = [
  {label: 'Random',
    h: 45,
    w: 45,
    func: patternRandom,
    exp: '生セルをランダムに配置'
  },
  {label:
    'Gosper Glider Gun',
    h: 27,
    w: 39,
    func: patternGun,
    exp: '発見者: Bill Gosper、発見年: 1970'},
  {label: 'Ants',
    h: 6,
    w: 44,
    func: patternAnts,
    exp: '発見者: 不明、発見年: 不明'},
  {label: 'AK-94',
    h: 25,
    w: 38,
    func: patternAK74,
    exp: '発見者: Mike Playle、発見年: 2013'},
  {label: 'Simkin Glider Gun',
    h: 27,
    w: 33,
    func: patternSimkinGliderGun,
    exp: '発見者: Michael Simkin、発見年: 2015'},
  {label: 'Period-45 glider gun',
    h: 40,
    w: 48,
    func: patternPeriod45GliderGun,
    exp: '発見者: Matthias Merzenich、発見年: 2010'},
]

export const defaultConfigIndex = 0
export const defaultBoard = {
  board: options[defaultConfigIndex].func(options[defaultConfigIndex].h, options[defaultConfigIndex].w),
  h: options[defaultConfigIndex].h,
  w: options[defaultConfigIndex].w
}


// patterns

function patternRandom (h, w){

  const random_min = 0;
  const random_max = 10;

  // fill with 0
  let line = Array(h+2)
  for (let i=0; i<h+2; i++) {
    line[i] = Array(w+2).fill(0)
  }

  for (let i=1; i<h+1; i++) {
    for (let j=1; j<w+1; j++) {
      line[i][j] =
        (7 <= getRandomInt(random_min, random_max) ? 1 : 0);
    }
  }
  return line;
}

function patternGun (h, w) {
  const pattern = [
'000000000000000000000000000000000000000',
'000000000000000000000000010000000000000',
'000000000000000000000001010000000000000',
'000000000000011000000110000000000001100',
'000000000000100010000110000000000001100',
'011000000001000001000110000000000000000',
'011000000001000101100001010000000000000',
'000000000001000001000000010000000000000',
'000000000000100010000000000000000000000',
'000000000000011000000000000000000000000',
'000000000000000000000000000000000000000',
'000000000000000000000000000000000000000',
'000000000000000000000000000000000000000',
'000000000000000000000000000000000000000',
'000000000000000000000000000000000000000',
'000000000000000000000000000000000000000',
'000000000000000000000000000000000000000',
'000000000000000000000000000000000000000',
'000000000000000000000000000000000000000',
'000000000000000000000000000000000000000',
'000000000000000000000000001100000000000',
'000000000000000000000000001100010000000',
'000000000000000000000000000000101000000',
'000000000000000000000000000000010100000',
'000000000000000000000000000000000100000',
'000000000000000000000000000000000110000',
'000000000000000000000000000000000000000',
  ]
  return convertPattern(pattern)
}

function patternAnts(h, w) {
  const pattern = [
'00000000000000000000000000000000000000000000',
'11000110001100011000110001100011000110001100',
'00110001100011000110001100011000110001100011',
'00110001100011000110001100011000110001100011',
'11000110001100011000110001100011000110001100',
'00000000000000000000000000000000000000000000',
]
  return convertPattern(pattern)
}

function patternAK74(h, w) {
  const pattern = [
'00000001000000010000000110000000000000', 
'00000001110000011100000110000000000000',
'00000000001000000010000000000000000000',
'00000000011000000110000000000000000110',
'00000000000000000000000000000011001001',
'00000000000000000000000000000010100110',
'00000000000000000000000000000000011000',
'00000100000000000000000000000000001000',
'00000111000000000000000000000000001011',
'00000000100000000000000000000001101001',
'00000001100000000000000000000001101100',
'00000000000000000000000000000000000000',
'00000000000000000000000000000000000000',
'00000000000000000100000000000000000000',
'00110110000000001010000000000110000000',
'10010110000000010001000000000100000000',
'11010000000000010001000000000011100000',
'00010000000000010001000000000000100000',
'00011000000000001010000000000000000000',
'01100101000000000100000000000000000000',
'10010011000000000000000000000000000000',
'01100000000000000001100000000000000000',
'00000000000000000001000000000000000000',
'00000000000001100000111000000000000000',
'00000000000001100000001000000000000000',
  ]
  return convertPattern(pattern)
}

function patternSimkinGliderGun(h, w) {
  const pattern = [
'000000000000000000000000000000000',
'000000000000000000000000000000000',
'000000000000000000000000000000000',
'000000000000000000000000000000000',
'000000000000000000000000000000000',
'000000000000000000000000000000000',
'000000000000000000000000000000000',
'110000011000000000000000000000000', 
'110000011000000000000000000000000',
'000000000000000000000000000000000',
'000011000000000000000000000000000',
'000011000000000000000000000000000',
'000000000000000000000000000000000',
'000000000000000000000000000000000',
'000000000000000000000000000000000',
'000000000000000000000000000000000',
'000000000000000000000010001000000',
'000000000000000000000100001100000',
'000000000000000000001100000110011',
'000000000000000000000110000100011',
'000000000000000000000010000000000',
'000000000000000000000000000000000',
'000000000000000000000000000000000',
'000000000000000000000000000000000',
'000000000000000000000000000000000',
'000000000000000000000000000000000',
'000000000000000000000000000000000',
  ]
  return convertPattern(pattern)
}

function patternPeriod45GliderGun(h, w) {
  const pattern = [
'000000000000000100100100000000000000000000000000', 
'000000000000000111111100000000000000000000000000',
'000000000000000000000000000000000000000000000000',
'000000000000000111111100000000000000000000000000',
'000000000000000100100100000000000000000000000000',
'000000000000000000000000000000000000000000000000',
'000000000000000000000000000000000000000000000000',
'000000000000000000000000000000000000000000000000',
'000000000000000000000000000000000000000000000000',
'000000000000000000000000000000000000000000000000',
'000000000000000010010000000000000000000000000000',
'000000000000110010010000000000000000000000000000',
'000000000000110010010000000110000000000000000000',
'000000000000000000000000000110000110001001000110',
'000000000000000000000000000000000111110000111110',
'000000000000000000000000000000000110001001000110',
'000000000000000000000000000111000000000000000000',
'000000000000000000000000000000000000000000000000',
'110110000000000000000000000000000000000000000000',
'010100000000000000000000000111000000000000000000',
'010100000011100000000000000000000000000000000000',
'110110000000000000000000000000000010100000000000',
'010100000000000000000000000000000001100000000000',
'010100000011100000000000000000000001000000000000',
'110110000000000000000000000000000000000000000000',
'000000000000000000000000000000000000000000000000',
'000000000001100000000000000000000000000000000000',
'000000000001100000001001001100000000000000000000',
'000000000000000000001001001100000000000000000000',
'000000000000000000001001000000000000000000000000',
'000000000000000000000000000000000000000000000000',
'000000000000000000000000000000000000000000000000',
'000000000000000000000000000000000000000000000001',
'000000000000000000000000000000000000000000000101',
'000000000000000000000000000000000000000000000011',
'000000000000000000100100100000000000000000000000',
'000000000000000000111111100000000000000000000000',
'000000000000000000000000000000000000000000000000',
'000000000000000000111111100000000000000000000000',
'000000000000000000100100100000000000000000000000',
  ]
  return convertPattern(pattern)
}

// utils

function convertPattern(s) {

  var line = []
  for (let i=0; i<s.length; i++){
    line.push(s[i].split('').map(s => Number(s)));
  }
  // wrap 0
  line.push(Array(s.length).fill(0))
  line.unshift(Array(s[0].length).fill(0))
  for (let i=0; i<line.length; i++){
    line[i].unshift(0);
    line[i].push(0);
  }
  return line
}

function getRandomInt(ceil, floor) {
  const min = Math.ceil(ceil);
  const max = Math.floor(floor);
  return Math.floor(Math.random() * (max - min)) + min;
}

//
// (GIF用)
// 色をランダムに変更する関数(後で追加するかは不明)
//
// const resetColor = () => {
//   var style = document.createElement('style');
//   style.innerHTML = `
//       .cell.life { background: green;}`;
//   document.head.appendChild(style);
// }
//
// var randomColor = function() {
//   var i = 0;
//   const colors = [
//     'black', 'aliceblue', 'darkcyan', 'lightyellow', 'coral',
//     'gray', 'lightsteelblue', 'darkslategray', 'lemonchiffon', 'orangered',
//     'silver', 'slategray', 'green', 'burlywood', 'crimson',
//     'green',
//   ]
//
//   return function() {
//     p(i)
//     var style = document.createElement('style');
//     style.innerHTML = `
//       .cell.life { background: ${colors[i]};}`;
//     document.head.appendChild(style);
//     if (i === colors.length-1) {
//       i = 0
//     } else {
//       i++;
//     }
//   };
// }();
